<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿßŸÑÿµŸÑŸàÿßÿ™</title>
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üïå</text></svg>">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#ffffff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Block specific requests before they happen -->
    <script>
        // Block specific requests before they're made
        const originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
            const element = originalCreateElement.call(document, tagName);
            
            // Block img elements with specific src
            if (tagName.toLowerCase() === 'img') {
                const originalSetAttribute = element.setAttribute;
                element.setAttribute = function(name, value) {
                    if (name === 'src' && 
                        (value.includes('icon-192x192.png') || 
                         value.includes('i.imgur.com/4Qz4Q1u.png'))) {
                        return; // Block the request
                    }
                    return originalSetAttribute.call(this, name, value);
                };
            }
            
            return element;
        };
        
        // Block dynamic imports of these URLs
        const originalCreateElementNS = document.createElementNS;
        document.createElementNS = function(namespace, tagName) {
            const element = originalCreateElementNS.call(document, namespace, tagName);
            
            if (tagName.toLowerCase() === 'image' || tagName.toLowerCase() === 'img') {
                const originalSetAttribute = element.setAttribute;
                element.setAttribute = function(name, value) {
                    if (name === 'src' && 
                        (value.includes('icon-192x192.png') || 
                         value.includes('i.imgur.com/4Qz4Q1u.png'))) {
                        return; // Block the request
                    }
                    return originalSetAttribute.call(this, name, value);
                };
            }
            
            return element;
        };
    </script>
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Preload a transparent 1x1 pixel as favicon -->
    <link rel="icon" href="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" type="image/gif" sizes="16x16">
    <link rel="icon" sizes="192x192" href="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
    <link rel="apple-touch-icon" href="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
    <meta name="msapplication-TileImage" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="bootstrap.min.css">
    <!-- Moment.js with fallback -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/ar.js"></script>
    
    <!-- Moment-hijri with fallback -->
    <script>
    function loadMomentHijri() {
        return new Promise((resolve) => {
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/moment-hijri@2.1.2/moment-hijri.min.js';
            script.onload = () => {
                console.log('Moment-hijri loaded successfully');
                resolve();
            };
            script.onerror = () => {
                console.warn('Failed to load moment-hijri from CDN, using fallback date handling');
                resolve();
            };
            document.head.appendChild(script);
        });
    }
    
    // Load moment-hijri and initialize
    document.addEventListener('DOMContentLoaded', () => {
        loadMomentHijri().then(() => {
            if (typeof momentHijri !== 'undefined') {
                // Initialize moment-hijri if available
                moment.locale('ar');
                console.log('Moment-hijri loaded successfully');
            }
        });
    });
    </script>
</head>

<body>
    <nav class="navbar">
        <div class="container">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link active" href="index.html">ÿßŸÑÿµŸÑŸàÿßÿ™</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="index2.html">ÿ™ÿ≥ÿ®Ÿäÿ≠</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="index3.html">ÿ£ÿ∞ŸÉÿßÿ±</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ad3ya.html">ÿ£ÿØÿπŸäÿ©</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="current-time">
            <h3 id="date"></h3>
            <h2 id="current-time"></h2>
        </div>
        <div class="first mainpray">
            <div class="text">
                <div class="pray">ÿßŸÑŸÅÿ¨ÿ±: <span id="fajr-time">--:--</span></div>
            </div>
        </div>
        <div class="sunrise mainpray">
            <div class="text">
                <div class="pray">ÿßŸÑÿ¥ÿ±ŸàŸÇ: <span id="sunrise-time">--:--</span></div>
            </div>
        </div>
        <div class="second mainpray">
            <div class="text">
                <div class="pray">ÿßŸÑÿ∏Ÿáÿ±: <span id="dhuhr-time">--:--</span></div>
            </div>
        </div>
        <div class="third mainpray">
            <div class="text">
                <div class="pray">ÿßŸÑÿπÿµÿ±: <span id="asr-time">--:--</span></div>
            </div>
        </div>
        <div class="fourth mainpray">
            <div class="text">
                <div class="pray">ÿßŸÑŸÖÿ∫ÿ±ÿ®: <span id="maghrib-time">--:--</span></div>
            </div>
        </div>
        <div class="fifth mainpray">
            <div class="text">
                <div class="pray">ÿßŸÑÿπÿ¥ÿßÿ°: <span id="isha-time">--:--</span></div>
            </div>
        </div>
        <div class="prayers-row" style="display:flex; gap: 20px; margin-top: 20px;">
            <div class="pray-counter" data-prayer="fajr" style="cursor:pointer;">
                ÿßŸÑŸÅÿ¨ÿ±: <span class="counter" id="counter-fajr">0</span>
            </div>
            <div class="pray-counter" data-prayer="dhuhr" style="cursor:pointer;">
                ÿßŸÑÿ∏Ÿáÿ±: <span class="counter" id="counter-dhuhr">0</span>
            </div>
            <div class="pray-counter" data-prayer="asr" style="cursor:pointer;">
                ÿßŸÑÿπÿµÿ±: <span class="counter" id="counter-asr">0</span>
            </div>
            <div class="pray-counter" data-prayer="maghrib" style="cursor:pointer;">
                ÿßŸÑŸÖÿ∫ÿ±ÿ®: <span class="counter" id="counter-maghrib">0</span>
            </div>
            <div class="pray-counter" data-prayer="isha" style="cursor:pointer;">
                ÿßŸÑÿπÿ¥ÿßÿ°: <span class="counter" id="counter-isha">0</span>
            </div>
        </div>
        <div class="location">
            <p id="location">ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸàŸÇÿπ...</p>
        </div>
        
        <!-- Audio elements -->
    <audio id="notificationSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    
    <audio id="adhanAudio" preload="auto">
        <source src="https://www.islamcan.com/audio/adhan/azan1.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    </div>
    <script src="main.js"></script>
    <script src="bootstrap.bundle.min.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
    <script>
        // Add event listener to each pray counter
        document.querySelectorAll('.pray-counter').forEach(counter => {
            counter.addEventListener('click', () => {
                // Get the current count
                let count = parseInt(counter.querySelector('.counter').textContent);
                // Increment the count
                count++;
                // Update the count in the DOM
                counter.querySelector('.counter').textContent = count;
                // Save the count to localStorage
                localStorage.setItem(counter.getAttribute('data-prayer'), count);
            });
        });

        // Load counts from localStorage
        document.querySelectorAll('.pray-counter').forEach(counter => {
            let count = localStorage.getItem(counter.getAttribute('data-prayer'));
            if (count) {
                counter.querySelector('.counter').textContent = count;
            }
        });
    </script>
</body>